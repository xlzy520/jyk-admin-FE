(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-3547a444"],{"11d4":function(e,t,a){"use strict";var i=a("a417");t["a"]={getPartner:function(e){return Object(i["a"])("/partner/list",e)},deletePartner:function(e){return Object(i["a"])("/partner/delete",e)}}},"1b80":function(e,t,a){"use strict";t["a"]={data:function(){return{pageOption:{pageIndex:1,pageSize:20},total:0}},methods:{pageChange:function(e){console.log(2),this.pageOption.pageIndex=e,this.fetchData()},sizeChange:function(e){console.log(3),this.pageOption.pageSize=e,this.fetchData()}}}},"28d4":function(e,t,a){},"65ed":function(e,t,a){"use strict";var i=a("a8da"),n=a.n(i);n.a},"943b":function(e,t,a){"use strict";a.r(t);var i=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"app-container"},[a("add-button",{on:{add:e.add}}),e._v(" "),a("xl-table",{directives:[{name:"loading",rawName:"v-loading",value:e.loading,expression:"loading"}],ref:"partnerTable",attrs:{index:!0,"table-data":e.partnerData,"table-columns":e.columns,total:e.total,pageSize:e.pageOption.pageSize,pageNo:e.pageOption.pageIndex},on:{"change-page":e.pageChange,"size-change":e.sizeChange}}),e._v(" "),a("el-dialog",{attrs:{width:"40%",title:e.isAdd?"新增合作伙伴":"合作伙伴信息更新","close-on-click-modal":!0,visible:e.editVisible},on:{"update:visible":function(t){e.editVisible=t},close:e.close}},[a("el-form",{ref:"form",attrs:{model:e.form,"label-width":"100px",rules:e.rules}},[a("el-form-item",{attrs:{label:"名称：",prop:"name"}},[a("el-input",{model:{value:e.form.name,callback:function(t){e.$set(e.form,"name",t)},expression:"form.name"}})],1),e._v(" "),a("el-form-item",{attrs:{label:"宣传图",prop:"img"}},[a("el-upload",{staticClass:"avatar-uploader",attrs:{action:"https://jsonplaceholder.typicode.com/posts/","show-file-list":!1,"on-success":e.uploadOk,"before-upload":e.beforeAvatarUpload}},[e.dialogImageUrl?a("img",{staticClass:"avatar",attrs:{src:e.dialogImageUrl}}):a("i",{staticClass:"el-icon-plus img-uploader-icon"})]),e._v(" "),a("el-dialog",{attrs:{visible:e.imgVisible,"append-to-body":""},on:{"update:visible":function(t){e.imgVisible=t}}},[a("el-image",{attrs:{src:e.dialogImageUrl,alt:"",fit:"fill"}})],1)],1),e._v(" "),a("el-form-item",{attrs:{label:"是否展示：",prop:"display"}},[a("el-switch",{attrs:{"active-color":"#13ce66","inactive-color":"#ff4949","active-text":"展示","inactive-text":"隐藏"},model:{value:e.form.display,callback:function(t){e.$set(e.form,"display",t)},expression:"form.display"}})],1)],1),e._v(" "),a("div",{staticClass:"dialog-footer"},[a("el-button",{attrs:{type:"primary"},on:{click:e.submitForm}},[e._v("提交")]),e._v(" "),a("el-button",{on:{click:e.resetForm}},[e._v("重置")])],1)],1)],1)},n=[],r=(a("96cf"),a("3b8d")),s=a("b4e4"),o=a("11d4"),l=(a("ed08"),a("1b80")),c={name:"Partner",components:{AddButton:s["a"]},mixins:[l["a"]],data:function(){var e=this;this.$createElement;return{partnerData:[],columns:[{label:"名称",prop:"partnersName",align:"center"},{label:"宣传图",prop:"fileUrl",align:"center",render:function(e,t){var a=t.props.row;return e("div",{class:"table-img"},[e("el-image",{attrs:{src:a.fileUrl,fit:"fit"}})])}},{label:"是否展示",prop:"show",align:"center",render:function(e,t){var a=t.props.row;return e("div",{class:"is-default-icon"},[e("i",{class:"el-icon-"+(a.show?"success":"error")})])}},{label:"添加时间",prop:"saveDate",align:"center"},{label:"更新时间",prop:"modifyDate",align:"center"},{label:"操作",prop:"operation",align:"center",render:function(t,a){var i=a.props.row;return t("div",{class:"table-action"},[t("span",{on:{click:function(){return e.update(i)}}},["编 辑"]),t("el-divider",{attrs:{direction:"vertical"}}),t("span",{on:{click:function(){return e.delete(i.id)}}},["删 除"])])}}],loading:!1,isAdd:!1,editVisible:!1,imgVisible:!1,dialogImageUrl:"",form:{partnersName:"",show:""},rules:{name:[{required:!0,message:"请输入名称",trigger:"blur"},{min:4,max:15,message:"长度在 4 到 15 个字符",trigger:"blur"}]},fileList:[]}},computed:{url:function(){return this.add?"add":"update"}},created:function(){this.fetchData()},methods:{beforeAvatarUpload:function(e){var t="image/jpeg"===e.type,a=e.size/1024/1024<2;return t||this.$message.error("上传头像图片只能是 JPG 格式!"),a||this.$message.error("上传头像图片大小不能超过 2MB!"),t&&a},controlHideUpload:function(e,t){t.length>0?this.hideUpload():this.hideUpload("")},onError:function(){this.$message1000("文件上传出错：网络错误","error"),this.editVisible=!1},uploadOk:function(e,t){console.log(e),this.dialogImageUrl=URL.createObjectURL(t.raw),console.log(this.dialogImageUrl)},handlePreview:function(e){this.imgVisible=!0,this.dialogImageUrl=e.url},fetchData:function(){var e=this;this.loading=!0,o["a"].getPartner().then(function(t){e.partnerData=t.list,e.total=t.total}).finally(function(t){e.loading=!1})},add:function(){this.isAdd=!0,this.editVisible=!0},update:function(e){this.isAdd=!1,this.form.partnersName=e.partnersName,this.form.show=e.show,this.fileList.push({name:e.partnersName,url:e.fileUrl}),this.editVisible=!0},delete:function(e){var t=this;this.$confirm("此操作将删除该合作伙伴, 是否继续?","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then(function(){o["a"].deletePartner(e).then(function(e){t.$message1000("删除成功","success"),t.fetchData()})})},close:function(){this.fileList=[],this.resetForm()},submitForm:function(){var e=this;this.fileList.length<1?this.$message1000("请上传图片","warning"):this.$refs.form.validate(function(){var t=Object(r["a"])(regeneratorRuntime.mark(function t(a){return regeneratorRuntime.wrap(function(t){while(1)switch(t.prev=t.next){case 0:if(!a){t.next=4;break}e.$refs.upload.submit(),t.next=6;break;case 4:return console.log("error submit!!"),t.abrupt("return",!1);case 6:case"end":return t.stop()}},t)}));return function(e){return t.apply(this,arguments)}}())},resetForm:function(){this.$refs.form.resetFields()}}},d=c,u=(a("f368"),a("2877")),p=Object(u["a"])(d,i,n,!1,null,"02ab92d4",null);t["default"]=p.exports},a8da:function(e,t,a){},b4e4:function(e,t,a){"use strict";var i=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"add-button",on:{click:e.add}},[a("i",{staticClass:"el-icon-plus"})])},n=[],r={name:"AddButton",methods:{add:function(){this.$emit("add")}}},s=r,o=(a("65ed"),a("2877")),l=Object(o["a"])(s,i,n,!1,null,"f1447e70",null);t["a"]=l.exports},f368:function(e,t,a){"use strict";var i=a("28d4"),n=a.n(i);n.a}}]);