(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-20a681a9"],{"65ed":function(e,t,a){"use strict";var r=a("a8da"),n=a.n(r);n.a},a8da:function(e,t,a){},b4e4:function(e,t,a){"use strict";var r=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"add-button",on:{click:e.add}},[a("i",{staticClass:"el-icon-plus"})])},n=[],s={name:"AddButton",methods:{add:function(){this.$emit("add")}}},i=s,o=(a("65ed"),a("2877")),l=Object(o["a"])(i,r,n,!1,null,"f1447e70",null);t["a"]=l.exports},b97d:function(e,t,a){"use strict";a.r(t);var r=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"app-container"},[a("add-button",{on:{add:e.add}}),e._v(" "),a("xl-table",{ref:"staffTable",attrs:{index:!0,loading:e.loading,"table-data":e.staffData,"table-columns":e.columns}}),e._v(" "),a("el-dialog",{attrs:{width:"40%",title:e.isAdd?"新增人员":"人员信息更新","close-on-click-modal":!0,visible:e.editVisible},on:{"update:visible":function(t){e.editVisible=t},close:e.close}},[a("el-form",{ref:"form",attrs:{model:e.form,"label-width":"80px",rules:e.rules}},[a("el-form-item",{attrs:{label:"姓名",prop:"username"}},[a("el-input",{model:{value:e.form.username,callback:function(t){e.$set(e.form,"username",t)},expression:"form.username"}})],1),e._v(" "),a("el-form-item",{attrs:{label:"手机号",prop:"mobile"}},[a("el-input",{attrs:{maxLength:"11"},model:{value:e.form.mobile,callback:function(t){e.$set(e.form,"mobile",t)},expression:"form.mobile"}})],1),e._v(" "),a("el-form-item",{attrs:{label:"角色类型",prop:"roleCode"}},[a("el-radio-group",{model:{value:e.form.roleCode,callback:function(t){e.$set(e.form,"roleCode",t)},expression:"form.roleCode"}},[a("el-radio",{attrs:{label:"admin",border:""}},[e._v("管理员")]),e._v(" "),a("el-radio",{attrs:{label:"staff",border:""}},[e._v("普通员工")])],1)],1),e._v(" "),a("el-form-item",{attrs:{label:"负责区域",prop:"area"}},[a("el-select",{attrs:{placeholder:"请选择负责区域"},model:{value:e.form.area,callback:function(t){e.$set(e.form,"area",t)},expression:"form.area"}},[a("el-option",{attrs:{label:"上海",value:"shanghai"}}),e._v(" "),a("el-option",{attrs:{label:"深圳",value:"shenzhen"}})],1)],1),e._v(" "),e.isAdd?a("el-form-item",{attrs:{label:"登录密码",prop:"password"}},[a("el-input",{attrs:{type:"password","max-length":"20"},model:{value:e.form.password,callback:function(t){e.$set(e.form,"password",t)},expression:"form.password"}})],1):e._e()],1),e._v(" "),a("div",{staticClass:"dialog-footer"},[a("el-button",{attrs:{type:"primary"},on:{click:e.submitForm}},[e._v("提交")]),e._v(" "),a("el-button",{on:{click:e.resetForm}},[e._v("重置")])],1)],1)],1)},n=[],s=(a("96cf"),a("3b8d")),i=a("b4e4"),o=a("a417"),l={getStaff:function(e){return Object(o["a"])("/staff/list",e)},addStaff:function(e){return Object(o["a"])("/staff/add",e)},updateStaff:function(e){return Object(o["a"])("/staff/update",e)},deleteStaff:function(e){return Object(o["a"])("/staff/delete",e)}},c=a("ed08"),d={name:"Staff",components:{AddButton:i["a"]},data:function(){var e=this;this.$createElement;return{staffData:[],columns:[{label:"姓名",prop:"username",align:"center"},{label:"手机号",prop:"mobile",align:"center"},{label:"角色",prop:"roleCode",align:"center",render:function(t,a){var r=a.props.row,n=e.statusFilter(r.roleCode);return t("el-tag",{attrs:{type:n.type}},[n.text])}},{label:"负责区域",prop:"area",align:"center"},{label:"操作",align:"center",render:function(t,a){var r=a.props.row;return t("div",{class:"table-action"},[t("span",{on:{click:function(){return e.update(r)}}},["编 辑"]),t("el-divider",{attrs:{direction:"vertical"}}),t("span",{on:{click:function(){return e.delete(r.userId)}}},["删 除"])])}}],pageOption:{pageIndex:1,pageSize:100},loading:!1,isAdd:!1,editVisible:!1,form:{username:"",roleCode:"",mobile:"",password:"",area:""},rules:{username:[{required:!0,message:"请输入姓名",trigger:"blur"},{min:2,max:15,message:"长度在 2 到 15 个字符",trigger:"blur"}],roleCode:[{required:!0,message:"请选择一个角色",trigger:"change"}],area:[{required:!0,message:"请选择一个区域",trigger:"change"}],mobile:[{required:!0,message:"请填写手机号",trigger:"blur"},{pattern:/^(13[0-9]|14[579]|15[0-3,5-9]|16[6]|17[0135678]|18[0-9]|19[89])\d{8}$/,message:"请填写符合要求的11位手机号",trigger:"blur"}],password:[{required:!0,message:"请填写密码",trigger:"change"},{pattern:/^[^\\\\\\\/:*?\s\\"<>|]+$/,message:"请不要输入特殊字符",trigger:"blur"},{min:6,max:20,message:"长度在 6 到 20 个字符",trigger:"blur"}]}}},created:function(){this.fetchData()},methods:{statusFilter:function(e){var t={super:"danger",admin:"warning",staff:"success"},a={super:"超级管理员",admin:"管理员",staff:"员工"};return{text:a[e],type:t[e]}},fetchData:function(){var e=this;this.loading=!0,l.getStaff(this.pageOption).then(function(t){e.staffData=t.list}).finally(function(t){e.loading=!1})},add:function(){this.isAdd=!0,this.editVisible=!0},update:function(e){this.isAdd=!1,this.form=Object(c["b"])(e),this.editVisible=!0},delete:function(e){var t=this;this.$confirm("此操作将删除该人员, 是否继续?","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"danger"}).then(function(){l.deleteStaff({userId:e}).then(function(e){t.$message1000("删除成功","success"),t.fetchData()})})},close:function(){this.editVisible=!1,this.$refs.form.resetFields()},submitForm:function(){var e=this;this.$refs.form.validate(function(){var t=Object(s["a"])(regeneratorRuntime.mark(function t(a){var r;return regeneratorRuntime.wrap(function(t){while(1)switch(t.prev=t.next){case 0:if(!a){t.next=12;break}return t.next=3,e.isAdd;case 3:if(!t.sent){t.next=7;break}t.t0=l.addStaff(e.form),t.next=8;break;case 7:t.t0=l.updateStaff(e.form);case 8:r=t.t0,r.then(function(t){e.$message1000("提交成功","success"),e.close(),e.fetchData()}),t.next=14;break;case 12:return console.log("error submit!!"),t.abrupt("return",!1);case 14:case"end":return t.stop()}},t)}));return function(e){return t.apply(this,arguments)}}())},resetForm:function(){this.$refs.form.resetFields()}}},u=d,f=a("2877"),m=Object(f["a"])(u,r,n,!1,null,"f908fe02",null);t["default"]=m.exports}}]);