(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-3a1c7d12"],{"1b80":function(e,t,a){"use strict";t["a"]={data:function(){return{pageOption:{pageIndex:1,pageSize:20},total:0}},methods:{pageChange:function(e){console.log(2),this.pageOption.pageIndex=e,this.fetchData()},sizeChange:function(e){console.log(3),this.pageOption.pageSize=e,this.fetchData()}}}},"8c79":function(e,t,a){"use strict";var r=a("cc7b"),s=a.n(r);s.a},cc18:function(e,t,a){"use strict";a.r(t);var r=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"app-container"},[a("div",{staticClass:"header"},[a("el-form",{ref:"searchForm",attrs:{model:e.searchForm,inline:!0,size:"medium"}},[a("el-form-item",{attrs:{prop:"nickname"}},[a("el-input",{attrs:{maxLength:"11",placeholder:"昵称"},model:{value:e.searchForm.nickname,callback:function(t){e.$set(e.searchForm,"nickname",t)},expression:"searchForm.nickname"}})],1),e._v(" "),a("el-form-item",{attrs:{prop:"name"}},[a("el-input",{attrs:{maxLength:"11",placeholder:"联系人"},model:{value:e.searchForm.name,callback:function(t){e.$set(e.searchForm,"name",t)},expression:"searchForm.name"}})],1),e._v(" "),a("el-form-item",{attrs:{prop:"phone"}},[a("el-input",{attrs:{maxLength:"11",placeholder:"手机号"},model:{value:e.searchForm.phone,callback:function(t){e.$set(e.searchForm,"phone",t)},expression:"searchForm.phone"}})],1),e._v(" "),a("el-form-item",{attrs:{prop:"type"}},[a("el-select",{attrs:{placeholder:"请选择用户类型"},model:{value:e.searchForm.type,callback:function(t){e.$set(e.searchForm,"type",t)},expression:"searchForm.type"}},[a("el-option",{attrs:{label:"全部",value:"all"}}),e._v(" "),a("el-option",{attrs:{label:"餐厅",value:"restaurant"}}),e._v(" "),a("el-option",{attrs:{label:"学校",value:"school"}})],1)],1),e._v(" "),a("el-form-item",{attrs:{prop:"isDefault"}},[a("el-select",{attrs:{placeholder:"是否默认地址"},model:{value:e.searchForm.isDefault,callback:function(t){e.$set(e.searchForm,"isDefault",t)},expression:"searchForm.isDefault"}},[a("el-option",{attrs:{label:"全部",value:"all"}}),e._v(" "),a("el-option",{attrs:{label:"默认",value:"1"}}),e._v(" "),a("el-option",{attrs:{label:"非默认",value:"0"}})],1)],1),e._v(" "),a("el-form-item",{attrs:{prop:"addTime"}},[a("el-date-picker",{attrs:{type:"daterange",align:"center","start-placeholder":"开始日期","end-placeholder":"结束日期","value-format":"yyyy-MM-dd",clearable:!1},model:{value:e.searchForm.addTime,callback:function(t){e.$set(e.searchForm,"addTime",t)},expression:"searchForm.addTime"}})],1),e._v(" "),a("el-form-item",{attrs:{prop:"updateTime"}},[a("el-date-picker",{attrs:{type:"daterange",align:"center","start-placeholder":"开始日期","end-placeholder":"结束日期","value-format":"yyyy-MM-dd",clearable:!1},model:{value:e.searchForm.updateTime,callback:function(t){e.$set(e.searchForm,"updateTime",t)},expression:"searchForm.updateTime"}})],1),e._v(" "),a("el-form-item",[a("el-button",{attrs:{type:"primary",icon:"el-icon-search"},on:{click:e.fetchData}},[e._v("查询")]),e._v(" "),a("el-button",{attrs:{type:"info"},on:{click:function(t){return e.resetForm("searchForm")}}},[e._v("清空")])],1)],1)],1),e._v(" "),a("xl-table",{directives:[{name:"loading",rawName:"v-loading",value:e.loading,expression:"loading"}],ref:"addressTable",attrs:{index:!0,"table-data":e.addressData,"table-columns":e.columns,total:e.total,pageSize:e.pageOption.pageSize,pageNo:e.pageOption.pageIndex},on:{"change-page":e.pageChange,"size-change":e.sizeChange}}),e._v(" "),a("el-dialog",{attrs:{width:"40%",title:"地址信息编辑","close-on-click-modal":!0,visible:e.editVisible},on:{"update:visible":function(t){e.editVisible=t},close:e.close}},[a("el-form",{ref:"dialogForm",attrs:{model:e.addressForm,"label-width":"80px",rules:e.rules}},[a("el-form-item",{attrs:{label:"联系人",prop:"name"}},[a("el-input",{attrs:{"suffix-icon":"el-icon-user",maxLength:"15"},model:{value:e.addressForm.name,callback:function(t){e.$set(e.addressForm,"name",t)},expression:"addressForm.name"}})],1),e._v(" "),a("el-form-item",{attrs:{label:"手机号",prop:"phone"}},[a("el-input",{attrs:{"suffix-icon":"el-icon-phone",maxLength:"11"},model:{value:e.addressForm.phone,callback:function(t){e.$set(e.addressForm,"phone",t)},expression:"addressForm.phone"}})],1),e._v(" "),a("el-form-item",{attrs:{label:"详细地址",prop:"address"}},[a("el-input",{attrs:{"suffix-icon":"el-icon-location",maxLength:"40",type:"textarea",rows:2},model:{value:e.addressForm.address,callback:function(t){e.$set(e.addressForm,"address",t)},expression:"addressForm.address"}})],1),e._v(" "),a("el-form-item",{attrs:{label:"用户类型",prop:"type"}},[a("el-radio-group",{model:{value:e.addressForm.type,callback:function(t){e.$set(e.addressForm,"type",t)},expression:"addressForm.type"}},[a("el-radio",{attrs:{label:"restaurant",border:""}},[e._v("餐厅")]),e._v(" "),a("el-radio",{attrs:{label:"school",border:""}},[e._v("学校")])],1)],1)],1),e._v(" "),a("div",{staticClass:"dialog-footer"},[a("el-button",{attrs:{type:"primary"},on:{click:e.submitForm}},[e._v("提交")]),e._v(" "),a("el-button",{on:{click:function(t){return e.resetForm("dialogForm")}}},[e._v("重置")])],1)],1)],1)},s=[],o=a("cebc"),n=(a("6b54"),a("a417")),l={getAddress:function(e){return Object(n["a"])("/address/list",e)},updateAddress:function(e){return Object(n["a"])("/address/update",e)},deleteAddress:function(e){return Object(n["a"])("/address/delete",e)}},i=a("ed08"),c=a("1b80"),d={name:"Address",mixins:[c["a"]],data:function(){var e=this;this.$createElement;return{addressData:[],columns:[{label:"昵称",prop:"nickname",align:"center",width:180,showOverflowTooltip:!0},{label:"联系人",prop:"name",align:"center",width:100},{label:"手机号",prop:"phone",align:"center",width:110,formatter:function(e){return e.phone.toString()}},{label:"类型",prop:"type",align:"center",width:80,filters:[{text:"学校",value:"school"},{text:"餐厅",value:"restaurant"}],filterMethod:function(e,t){return t.type===e},filterPlacement:"bottom-end",render:function(e,t){var a=t.props.row;return"school"===a.type?e("el-tag",{attrs:{type:"danger"}},["学校"]):e("el-tag",{attrs:{type:"primary"}},["餐厅"])}},{label:"详细地址",prop:"address",align:"center",width:160},{label:"是否默认",prop:"isDefault",align:"center",width:80,render:function(e,t){var a=t.props.row;return e("div",{class:"is-default-icon"},[e("i",{class:"el-icon-"+(a.isDefault?"success":"error")})])}},{label:"添加时间",prop:"addTime",align:"center",minWidth:80},{label:"更新时间",prop:"updateTime",align:"center",minWidth:80},{label:"操作",prop:"region",align:"center",minWidth:120,render:function(t,a){var r=a.props.row;return t("div",{class:"table-action"},[t("span",{on:{click:function(){return e.edit(r)}}},["编辑"]),t("el-divider",{attrs:{direction:"vertical"}}),t("span",{on:{click:function(){return e.delete(r.id)}}},["删除"])])}}],loading:!1,editVisible:!1,searchForm:{nickname:"",name:"",phone:"",type:"",isDefault:"",addTime:"",updateTime:""},addressForm:{name:"",type:"",phone:"",address:""},rules:{name:[{required:!0,message:"请输入姓名",trigger:"blur"},{min:2,max:15,message:"长度在 2 到 15 个字符",trigger:"blur"}],type:[{required:!0,message:"请选择一个类型",trigger:"change"}],phone:[{required:!0,message:"请填写手机号",trigger:"blur"},{pattern:/^(13[0-9]|14[579]|15[0-3,5-9]|16[6]|17[0135678]|18[0-9]|19[89])\d{8}$/,message:"请填写符合要求的11位手机号",trigger:"blur"}],address:[{required:!0,message:"请填写地址",trigger:"blur"}]}}},created:function(){this.fetchData()},methods:{fetchData:function(){var e=this;this.loading=!0,l.getAddress(Object(o["a"])({},this.searchForm,this.pageOption)).then(function(t){e.addressData=t.list,e.total=t.total}).finally(function(t){e.loading=!1})},edit:function(e){this.addressForm=Object(i["b"])(e),this.editVisible=!0},delete:function(e){var t=this;this.$confirm("此操作将删除该地址信息, 是否继续?","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then(function(){l.deleteAddress(e).then(function(e){t.$message1000("删除成功","success"),t.fetchData()})})},close:function(){this.editVisible=!1,this.resetForm("dialogForm")},submitForm:function(){var e=this;this.$refs.form.validate(function(t){if(!t)return console.log("error submit!!"),!1;l.updateAddress(e.addressForm).then(function(t){e.$message1000("提交成功","success"),e.close(),e.fetchData()})})},resetForm:function(e){this.$refs[e].resetFields()}}},p=d,m=(a("8c79"),a("2877")),u=Object(m["a"])(p,r,s,!1,null,"03bf1e04",null);t["default"]=u.exports},cc7b:function(e,t,a){}}]);