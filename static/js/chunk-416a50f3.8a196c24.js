(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-416a50f3"],{"1f48":function(e,t,a){"use strict";var r=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"base-table"},[a("el-table",{directives:[{name:"loading",rawName:"v-loading",value:e.loading,expression:"loading"}],ref:"baseTable",attrs:{"highlight-current-row":"",data:e.tableData,stripe:e.stripe,"header-row-class-name":"header-row"},on:{"row-click":e.clickRow,select:e.handleSelection,"select-all":e.selectAll,"selection-change":e.handleSelectionChange,"cell-dblclick":e.dblclickRow,"cell-click":e.clickCell,"row-contextmenu":e.showMenu}},[e.selection?a("el-table-column",{attrs:{type:"selection",width:"55"}}):e._e(),e._v(" "),e.index?a("el-table-column",{attrs:{type:"index",width:"55"}}):e._e(),e._v(" "),e._l(e.columns,function(t){return a("el-table-column",e._b({key:t.label,scopedSlots:e._u([{key:"default",fn:function(r){return t.component?[a(t.component,e._b({tag:"component"},"component",e.getComponentBind(r,t),!1))]:void 0}}],null,!0)},"el-table-column",t,!1))})],2),e._v(" "),e.total>e.pageSize?a("el-pagination",{staticClass:"pagination",attrs:{background:"","current-page":e.pageNo,"page-size":e.pageSize,"prev-text":"上一页","next-text":"下一页",layout:"prev, pager, next, jumper",total:e.total},on:{"current-change":e.handleCurrentChange}}):e._e()],1)},n=[],l=a("cebc"),o=(a("c5f6"),function(){return{functional:!0,render:function(e,t){var a=t.props,r=a.row,n=a.col,l=t._v,o=n.formatter,s=o&&o(r,n)||r[n.prop]||"";return l&&l(s)||s}}}),s={name:"BaseTable",props:{selection:{type:String,default:""},tableData:{type:Array,default:function(){}},tableColumns:{type:Array,default:function(){}},stripe:{type:Boolean,default:!1},loading:{type:Boolean,default:!1},total:{type:Number,default:0},pageNo:{type:Number,default:1},pageSize:{type:Number,default:15},index:Boolean},data:function(){return{columns:[]}},mounted:function(){this.columns=this.tableColumns.filter(function(e){return!e.hidden}).map(function(e){var t=o();return e.render&&(t.render=e.render),"index"===e.type?Object(l["a"])({},e):Object(l["a"])({},e,{component:t})})},methods:{handleCurrentChange:function(e){this.$emit("change-page",e)},getComponentBind:function(e,t){var a=e.row,r=e.column,n=e.$index;return{row:a,col:t,column:r,$index:n}},clickRow:function(e){this.toggleRowSelection(e)},toggleRowSelection:function(e,t){this.$refs.baseTable.toggleRowSelection(e,t)},showMenu:function(e,t,a){this.$emit("row-contextmenu",e,t,a)},dblclickRow:function(e){this.$emit("cell-dblclick",e)},clickCell:function(e,t,a,r){this.$emit("cellclick",e,t,a,r)},handleSelectionChange:function(e){this.$emit("selection-change",e)},handleSelection:function(e){this.$emit("selectchange",e)},selectAll:function(e){this.$emit("selectAll",e)}}},i=s,c=(a("e338"),a("2877")),d=Object(c["a"])(i,r,n,!1,null,"24261058",null);t["a"]=d.exports},4473:function(e,t,a){"use strict";var r=a("c529"),n=a.n(r);n.a},c529:function(e,t,a){},cc18:function(e,t,a){"use strict";a.r(t);var r=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"app-container"},[a("div",{staticClass:"header"},[a("el-form",{ref:"searchForm",attrs:{model:e.searchForm,inline:!0,size:"medium"}},[a("el-form-item",{attrs:{label:"昵称:",prop:"nickname"}},[a("el-input",{attrs:{maxLength:"11"},model:{value:e.searchForm.nickname,callback:function(t){e.$set(e.searchForm,"nickname",t)},expression:"searchForm.nickname"}})],1),e._v(" "),a("el-form-item",{attrs:{label:"联系人:",prop:"name"}},[a("el-input",{attrs:{maxLength:"11"},model:{value:e.searchForm.name,callback:function(t){e.$set(e.searchForm,"name",t)},expression:"searchForm.name"}})],1),e._v(" "),a("el-form-item",{attrs:{label:"手机号:",prop:"phone"}},[a("el-input",{attrs:{maxLength:"11"},model:{value:e.searchForm.phone,callback:function(t){e.$set(e.searchForm,"phone",t)},expression:"searchForm.phone"}})],1),e._v(" "),a("el-form-item",{attrs:{label:"用户类型:",prop:"type"}},[a("el-select",{attrs:{placeholder:"请选择用户类型"},model:{value:e.addressForm.type,callback:function(t){e.$set(e.addressForm,"type",t)},expression:"addressForm.type"}},[a("el-option",{attrs:{label:"全部",value:""}}),e._v(" "),a("el-option",{attrs:{label:"餐厅",value:"restaurant"}}),e._v(" "),a("el-option",{attrs:{label:"学校",value:"school"}})],1)],1),e._v(" "),a("el-form-item",{attrs:{label:"是否默认:",prop:"isDefault"}},[a("el-switch",{attrs:{"active-color":"#13ce66","inactive-color":"#ff4949"},model:{value:e.searchForm.isDefault,callback:function(t){e.$set(e.searchForm,"isDefault",t)},expression:"searchForm.isDefault"}})],1),e._v(" "),a("el-form-item",{attrs:{label:"添加时间:",prop:"addTime"}},[a("el-date-picker",{attrs:{type:"daterange",align:"center","start-placeholder":"开始日期","end-placeholder":"结束日期"},model:{value:e.searchForm.addTime,callback:function(t){e.$set(e.searchForm,"addTime",t)},expression:"searchForm.addTime"}})],1),e._v(" "),a("el-form-item",{attrs:{label:"更新时间:",prop:"updateTime"}},[a("el-date-picker",{attrs:{type:"daterange",align:"center","start-placeholder":"开始日期","end-placeholder":"结束日期"},model:{value:e.searchForm.updateTime,callback:function(t){e.$set(e.searchForm,"updateTime",t)},expression:"searchForm.updateTime"}})],1),e._v(" "),a("el-form-item",[a("el-button",{attrs:{type:"primary",icon:"el-icon-search"},on:{click:function(t){return e.fetchData(e.searchForm)}}},[e._v("查询")]),e._v(" "),a("el-button",{attrs:{type:"info"},on:{click:e.resetForm}},[e._v("清空")])],1)],1)],1),e._v(" "),a("base-table",{ref:"addressTable",attrs:{index:!0,loading:e.loading,"table-data":e.addressData,"table-columns":e.columns}}),e._v(" "),a("el-dialog",{attrs:{width:"40%",title:"地址信息编辑","close-on-click-modal":!0,visible:e.editVisible},on:{"update:visible":function(t){e.editVisible=t},close:e.close}},[a("el-form",{ref:"form",attrs:{model:e.addressForm,"label-width":"80px",rules:e.rules}},[a("el-form-item",{attrs:{label:"联系人",prop:"name"}},[a("el-input",{attrs:{"suffix-icon":"el-icon-user",maxLength:"15"},model:{value:e.addressForm.name,callback:function(t){e.$set(e.addressForm,"name",t)},expression:"addressForm.name"}})],1),e._v(" "),a("el-form-item",{attrs:{label:"手机号",prop:"phone"}},[a("el-input",{attrs:{"suffix-icon":"el-icon-phone",maxLength:"11"},model:{value:e.addressForm.phone,callback:function(t){e.$set(e.addressForm,"phone",t)},expression:"addressForm.phone"}})],1),e._v(" "),a("el-form-item",{attrs:{label:"详细地址",prop:"address"}},[a("el-input",{attrs:{"suffix-icon":"el-icon-location",maxLength:"40",type:"textarea",rows:2},model:{value:e.addressForm.address,callback:function(t){e.$set(e.addressForm,"address",t)},expression:"addressForm.address"}})],1),e._v(" "),a("el-form-item",{attrs:{label:"用户类型",prop:"type"}},[a("el-radio-group",{model:{value:e.addressForm.type,callback:function(t){e.$set(e.addressForm,"type",t)},expression:"addressForm.type"}},[a("el-radio",{attrs:{label:"restaurant",border:""}},[e._v("餐厅")]),e._v(" "),a("el-radio",{attrs:{label:"school",border:""}},[e._v("学校")])],1)],1)],1),e._v(" "),a("div",{staticClass:"dialog-footer"},[a("el-button",{attrs:{type:"primary"},on:{click:e.submitForm}},[e._v("提交")]),e._v(" "),a("el-button",{on:{click:e.resetForm}},[e._v("重置")])],1)],1)],1)},n=[],l=(a("6b54"),a("1f48")),o=a("a417"),s={getAddress:function(e){return Object(o["a"])("/address/list",e)},updateAddress:function(e){return Object(o["a"])("/address/update",e)},deleteAddress:function(e){return Object(o["a"])("/address/delete",e)}},i=a("ed08"),c={name:"Address",components:{BaseTable:l["a"]},data:function(){var e=this;this.$createElement;return{addressData:[],columns:[{label:"昵称",prop:"nickname",align:"center",width:120},{label:"联系人",prop:"name",align:"center",width:100},{label:"手机号",prop:"phone",align:"center",width:110,formatter:function(e){return e.phone.toString()}},{label:"类型",prop:"type",align:"center",width:80,filters:[{text:"学校",value:"school"},{text:"餐厅",value:"restaurant"}],filterMethod:function(e,t){return t.type===e},filterPlacement:"bottom-end",render:function(e,t){var a=t.props.row;return"school"===a.type?e("el-tag",{attrs:{type:"danger"}},["学校"]):e("el-tag",{attrs:{type:"primary"}},["餐厅"])}},{label:"详细地址",prop:"address",align:"center",minWidth:180},{label:"是否默认",prop:"isDefault",align:"center",width:80,render:function(e,t){var a=t.props.row;return e("div",{class:"is-default-icon"},[e("i",{class:"el-icon-"+(a.isDefault?"success":"error")})])}},{label:"添加时间",prop:"addTime",align:"center",minWidth:80},{label:"更新时间",prop:"updateTime",align:"center",minWidth:80},{label:"操作",prop:"region",align:"center",minWidth:120,render:function(t,a){var r=a.props.row;return t("div",{class:"table-action"},[t("span",{on:{click:function(){return e.update(r)}}},["编辑"]),t("el-divider",{attrs:{direction:"vertical"}}),t("span",{on:{click:function(){return e.delete(r.id)}}},["删除"])])}}],loading:!1,editVisible:!1,searchForm:{nickname:"",name:"",phone:"",type:"",isDefault:"",addTime:"",updateTime:""},addressForm:{name:"",type:"",phone:"",address:""},rules:{name:[{required:!0,message:"请输入姓名",trigger:"blur"},{min:2,max:15,message:"长度在 2 到 15 个字符",trigger:"blur"}],type:[{required:!0,message:"请选择一个类型",trigger:"change"}],phone:[{required:!0,message:"请填写手机号",trigger:"blur"},{pattern:/^(13[0-9]|14[579]|15[0-3,5-9]|16[6]|17[0135678]|18[0-9]|19[89])\d{8}$/,message:"请填写符合要求的11位手机号",trigger:"blur"}],address:[{required:!0,message:"请填写地址",trigger:"blur"}]}}},created:function(){this.fetchData()},methods:{fetchData:function(e){var t=this;this.loading=!0,s.getAddress(e).then(function(e){t.addressData=e.list}).finally(function(e){t.loading=!1})},update:function(e){this.addressForm=Object(i["b"])(e),this.editVisible=!0},delete:function(e){var t=this;this.$confirm("此操作将删除该地址信息, 是否继续?","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then(function(){s.deleteAddress(e).then(function(e){t.$message1000("删除成功","success"),t.fetchData()})})},close:function(){this.editVisible=!1,this.addressForm={name:"",roles:"",phone:"",password:"",region:""}},submitForm:function(){var e=this;this.$refs.form.validate(function(t){if(!t)return console.log("error submit!!"),!1;s.updateAddress(e.addressForm).then(function(t){e.$message1000("提交成功","success"),e.close(),e.fetchData()})})},resetForm:function(){this.$refs.form.resetFields()}}},d=c,u=(a("4473"),a("2877")),m=Object(u["a"])(d,r,n,!1,null,"4886b4b2",null);t["default"]=m.exports},d7a4:function(e,t,a){},e338:function(e,t,a){"use strict";var r=a("d7a4"),n=a.n(r);n.a}}]);