(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-82945e06"],{"1f48":function(e,t,n){"use strict";var a=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{staticClass:"base-table"},[n("el-table",{directives:[{name:"loading",rawName:"v-loading",value:e.loading,expression:"loading"}],ref:"baseTable",attrs:{"highlight-current-row":"",data:e.tableData,stripe:e.stripe,"header-row-class-name":"header-row"},on:{"row-click":e.clickRow,select:e.handleSelection,"select-all":e.selectAll,"selection-change":e.handleSelectionChange,"cell-dblclick":e.dblclickRow,"cell-click":e.clickCell,"row-contextmenu":e.showMenu}},[e.selection?n("el-table-column",{attrs:{type:"selection",width:"55"}}):e._e(),e._v(" "),e.index?n("el-table-column",{attrs:{type:"index",width:"55"}}):e._e(),e._v(" "),e._l(e.columns,function(t){return n("el-table-column",e._b({key:t.label,scopedSlots:e._u([{key:"default",fn:function(a){return t.component?[n(t.component,e._b({tag:"component"},"component",e.getComponentBind(a,t),!1))]:void 0}}],null,!0)},"el-table-column",t,!1))})],2),e._v(" "),e.total>e.pageSize?n("el-pagination",{staticClass:"pagination",attrs:{background:"","current-page":e.pageNo,"page-size":e.pageSize,"prev-text":"上一页","next-text":"下一页",layout:"prev, pager, next, jumper",total:e.total},on:{"current-change":e.handleCurrentChange}}):e._e()],1)},i=[],r=n("cebc"),l=(n("c5f6"),function(){return{functional:!0,render:function(e,t){var n=t.props,a=n.row,i=n.col,r=t._v,l=i.formatter,o=l&&l(a,i)||a[i.prop]||"";return r&&r(o)||o}}}),o={name:"BaseTable",props:{selection:{type:String,default:""},tableData:{type:Array,default:function(){}},tableColumns:{type:Array,default:function(){}},stripe:{type:Boolean,default:!1},loading:{type:Boolean,default:!1},total:{type:Number,default:0},pageNo:{type:Number,default:1},pageSize:{type:Number,default:15},index:Boolean},data:function(){return{columns:[]}},mounted:function(){this.columns=this.tableColumns.filter(function(e){return!e.hidden}).map(function(e){var t=l();return e.render&&(t.render=e.render),"index"===e.type?Object(r["a"])({},e):Object(r["a"])({},e,{component:t})})},methods:{handleCurrentChange:function(e){this.$emit("change-page",e)},getComponentBind:function(e,t){var n=e.row,a=e.column,i=e.$index;return{row:n,col:t,column:a,$index:i}},clickRow:function(e){this.toggleRowSelection(e)},toggleRowSelection:function(e,t){this.$refs.baseTable.toggleRowSelection(e,t)},showMenu:function(e,t,n){this.$emit("row-contextmenu",e,t,n)},dblclickRow:function(e){this.$emit("cell-dblclick",e)},clickCell:function(e,t,n,a){this.$emit("cellclick",e,t,n,a)},handleSelectionChange:function(e){this.$emit("selection-change",e)},handleSelection:function(e){this.$emit("selectchange",e)},selectAll:function(e){this.$emit("selectAll",e)}}},c=o,s=(n("6883"),n("2877")),u=Object(s["a"])(c,a,i,!1,null,"380d95ff",null);t["a"]=u.exports},6418:function(e,t,n){},6883:function(e,t,n){"use strict";var a=n("ae02"),i=n.n(a);i.a},"8add":function(e,t,n){"use strict";var a=n("6418"),i=n.n(a);i.a},"943b":function(e,t,n){"use strict";n.r(t);var a=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{staticClass:"app-container"},[n("add-button",{on:{add:e.add}}),e._v(" "),n("base-table",{ref:"partnerTable",attrs:{index:!0,loading:e.loading,"table-data":e.partnerData,"table-columns":e.columns}}),e._v(" "),n("el-dialog",{attrs:{width:"40%",title:e.isAdd?"新增合作伙伴":"合作伙伴信息更新","close-on-click-modal":!0,visible:e.editVisible},on:{"update:visible":function(t){e.editVisible=t},close:e.close}},[n("el-form",{ref:"form",attrs:{model:e.form,"label-width":"100px",rules:e.rules}},[n("el-form-item",{attrs:{label:"名称：",prop:"name"}},[n("el-input",{model:{value:e.form.name,callback:function(t){e.$set(e.form,"name",t)},expression:"form.name"}})],1),e._v(" "),n("el-form-item",{attrs:{label:"宣传图",prop:"img"}},[n("el-image",{attrs:{src:e.form.img}}),e._v(" "),n("el-upload",{ref:"upload",attrs:{action:"https://jsonplaceholder.typicode.com/posts/","on-preview":e.handlePreview,"on-remove":e.handleRemove,"file-list":e.fileList,"auto-upload":!1,"list-type":"picture-card"}})],1),e._v(" "),n("el-form-item",{attrs:{label:"是否展示：",prop:"display"}},[n("el-switch",{attrs:{"active-color":"#13ce66","inactive-color":"#ff4949","active-text":"展示","inactive-text":"隐藏"},model:{value:e.form.display,callback:function(t){e.$set(e.form,"display",t)},expression:"form.display"}})],1)],1),e._v(" "),n("div",{staticClass:"dialog-footer"},[n("el-button",{attrs:{type:"primary"},on:{click:e.submitForm}},[e._v("提交")]),e._v(" "),n("el-button",{on:{click:e.resetForm}},[e._v("重置")])],1)],1)],1)},i=[],r=(n("96cf"),n("3b8d")),l=n("1f48"),o=n("b4e4"),c=n("a417"),s={getPartner:function(e){return Object(c["a"])("/partner/list",e)},addPartner:function(e){return Object(c["a"])("/partner/add",e)},updatePartner:function(e){return Object(c["a"])("/partner/update",e)},deletePartner:function(e){return Object(c["a"])("/partner/delete",e)}},u=n("ed08"),d={name:"Partner",components:{BaseTable:l["a"],AddButton:o["a"]},data:function(){var e=this;this.$createElement;return{partnerData:[],columns:[{label:"名称",prop:"name",align:"center"},{label:"宣传图",prop:"img",align:"center",render:function(e,t){var n=t.props.row;return e("div",{class:"table-img"},[e("el-image",{attrs:{src:n.img,fit:"fit"}})])}},{label:"是否展示",prop:"display",align:"center",render:function(e,t){var n=t.props.row;return e("div",{class:"is-default-icon"},[e("i",{class:"el-icon-"+(n.display?"success":"error")})])}},{label:"添加时间",prop:"addTime",align:"center"},{label:"更新时间",prop:"updateTime",align:"center"},{label:"操作",prop:"region",align:"center",render:function(t,n){var a=n.props.row;return t("div",{class:"table-action"},[t("span",{on:{click:function(){return e.update(a)}}},["编 辑"]),t("el-divider",{attrs:{direction:"vertical"}}),t("span",{on:{click:function(){return e.delete(a.id)}}},["删 除"])])}}],loading:!1,isAdd:!1,editVisible:!1,form:{name:"",img:"",display:""},rules:{name:[{required:!0,message:"请输入名称",trigger:"blur"},{min:4,max:15,message:"长度在 4 到 15 个字符",trigger:"blur"}],img:[{required:!0,message:"请上传一张图片",trigger:"change"}]}}},created:function(){this.fetchData()},methods:{handleRemove:function(e,t){console.log(e,t)},handlePictureCardPreview:function(e){this.form.img=e.url},fetchData:function(){var e=this;this.loading=!0,s.getPartner().then(function(t){e.partnerData=t.list}).finally(function(t){e.loading=!1})},add:function(){this.isAdd=!0,this.editVisible=!0},update:function(e){this.isAdd=!1,this.form=Object(u["b"])(e),this.editVisible=!0},delete:function(e){var t=this;this.$confirm("此操作将删除该合作伙伴, 是否继续?","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then(function(){s.deletePartner(e).then(function(e){t.$message1000("删除成功","success"),t.fetchData()})})},close:function(){this.editVisible=!1,this.form={name:"",img:"",phone:"",password:"",region:""}},submitForm:function(){var e=this;this.$refs.form.validate(function(){var t=Object(r["a"])(regeneratorRuntime.mark(function t(n){var a;return regeneratorRuntime.wrap(function(t){while(1)switch(t.prev=t.next){case 0:if(!n){t.next=12;break}return t.next=3,e.isAdd;case 3:if(!t.sent){t.next=7;break}t.t0=s.addPartner(e.form),t.next=8;break;case 7:t.t0=s.updatePartner(e.form);case 8:a=t.t0,a.then(function(t){e.$message1000("提交成功","success"),e.close(),e.fetchData()}),t.next=14;break;case 12:return console.log("error submit!!"),t.abrupt("return",!1);case 14:case"end":return t.stop()}},t)}));return function(e){return t.apply(this,arguments)}}())},resetForm:function(){this.$refs.form.resetFields()}}},f=d,p=n("2877"),m=Object(p["a"])(f,a,i,!1,null,"59c2abda",null);t["default"]=m.exports},ae02:function(e,t,n){},b4e4:function(e,t,n){"use strict";var a=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{staticClass:"add-button",on:{click:e.add}},[n("i",{staticClass:"el-icon-plus"})])},i=[],r={name:"AddButton",methods:{add:function(){this.$emit("add")}}},l=r,o=(n("8add"),n("2877")),c=Object(o["a"])(l,a,i,!1,null,"0eca12e7",null);t["a"]=c.exports}}]);